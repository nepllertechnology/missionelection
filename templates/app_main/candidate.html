{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/candidate.css' %}">
{% endblock %}

{% block content %}
<div class="content-wrapper">

    {% if results %}

    {% if result_type == 'district' %}
        {% for district in results %}
            <div class="district-card">
                <h3>{{ district.district_name }}</h3>
                <p>Province: {{ district.province.province_name }}</p>
                <p>Total Population: {{ district.total_population }}</p>
                <p>Male Population: {{ district.male_population }}</p>
                <p>Female Population: {{ district.female_population }}</p>
                <p>Local Units: {{ district.no_localunits }}</p>
                <p>Metropolitan: {{ district.no_metropolitan }}</p>
                <p>Municipalities: {{ district.no_municipalities }}</p>
                <p>Village Councils: {{ district.no_villageCouncil }}</p>
            </div>
        {% endfor %}
    {% elif result_type == 'local_unit' %}
    <section>
        <div class="mayoral-results-wrapper">
            <div id="mayoral-results-2079" class="mayoral-cards-wrapper">
                <!-- Dynamic content injected via JS -->
            </div>
            <div id="mayoral-summary-text" class="mayoral-results-summary mt-4"></div>
    
        </div>
    </section>

    <section id="ward-results-section">
        <h3>Ward Election Results 2079</h3>
        <div class="ward-select-row">
            <div class="select-ward-group">
                <label for="ward-select">Select Ward</label>
                <select id="ward-select" class="form-select"></select>
            </div>
            <div id="total-wards" class="total-wards-text"></div>
        </div>
        <div id="ward-results-container">
            <div class="ward-results-row">
                <div class="ward-result-card" id="ward-president-card">
                    <h5>Ward President</h5>
                    <!-- JS will inject candidates here -->
                </div>
                <div class="ward-result-card" id="female-member-card">
                    <h5>Female Member</h5>
                                        <!-- JS will inject candidates here -->

                </div>
                <div class="ward-result-card" id="dalit-female-member-card">
                    <h5>Dalit Female Member</h5>
                                        <!-- JS will inject candidates here -->

                </div>
                <div class="ward-result-card" id="member-card">
                    <h5>Member</h5>
                                        <!-- JS will inject candidates here -->

                </div>
            </div>
        </div>
    </section>

        {% for unit in results %}
        <h3>{{ unit.name }} {{ unit.type }}</h3>
        <div class="muni-section-flex">
            <div id="muni-map" class="muni-map-placeholder">
                <!-- Placeholder for map (can be empty for now) -->      
            </div>

            <div class="local-unit-card">
                <p><span class="label">District:</span> <span class="value">{{ unit.district.district_name }}</span></p>
                <p><span class="label">Number of Wards:</span> <span class="value">{{ unit.no_wards }}</span></p>
                <p><span class="label">Election Centers:</span> <span class="value">{{ unit.no_electionCenter }}</span></p>
                <p><span class="label">Total Population:</span> <span class="value">{{ unit.total_population }}</span></p>
                <p><span class="label">Male Voters:</span> <span class="value">{{ unit.no_maleVoters }}</span></p>
                <p><span class="label">Female Voters:</span> <span class="value">{{ unit.no_femaleVoters }}</span></p>
                <p><span class="label">Other Voters:</span> <span class="value">{{ unit.no_otherVoters }}</span></p>
                <p><span class="label">Total Eligible Voters:</span> <span class="value">{{ unit.total_eligibleVoters }}</span></p>
            </div>
        </div>
            <!-- <form method="GET" id="ward-form-{{ unit.id }}">
                <-- Send the local unit ID -->
                <!-- <input type="hidden" name="local_unit" value="{{ unit.name }}">
                
                <label for="ward-{{ unit.id }}">Select Ward:</label>
                <select name="ward" id="ward-{{ unit.id }}" onchange="loadCandidates('{{ unit.id }}')" required>
                    <option selected disabled>Choose Ward</option>
                    {% for i in ""|center:unit.no_wards %}
                        <option value="{{ forloop.counter }}">{{ forloop.counter }}</option>
                    {% endfor %}
                </select>
            </form> --> 
        {% endfor %}

    {% elif result_type == 'province' %}
        {% for province in results %}
            <div class="province-card">
                <h3>{{ province.province_name }}</h3>
                <p>Headquarter: {{ province.province_headquarter }}</p>
            </div>
        {% endfor %}
    {% endif %}

{% endif %}
<div id="candidate-results-{{ unit.id }}" class="candidate-results"></div>
</section> 
</div>
</div>

{% block extra_script %}

{% endblock %} 


<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!--  custom JS -->
<script src="{% static 'js/home.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>

<!-- bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js"
    integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+"
    crossorigin="anonymous"></script>


{% endblock %}

