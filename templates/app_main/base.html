<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Local By-Election 2081</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <!--custom CSS -->
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
  {% block extra_css %}{% endblock %}
  
  <!-- Ttile font-->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">

</head>
<body>
  <!-- Blue Header Bar -->
  <div class="header-bar d-flex align-items-center justify-content-center">
    <div class="page-title">Local By-Election 2081</div>
  </div>

<!-- Fixed Navigation Bar -->
<div class="navbar-bar">
  <a href="{% url 'home' %}">Home</a>
  <a href="#">Party Overview</a>
  <a href="#">Manifesto</a>
  <a href="#">Trending</a>
  <a href="#">All Candidates</a>
  <a href="#">Election News</a>
  <a href="#">Voter Education</a>
</div>

<!-- Form Section -->
<!-- <div class="container-fluid px-5 mt-5"> -->
  <form id="searchForm" method="GET" action="{% url 'search_results' %}">
    <!-- Province Dropdown -->
    <select name="province" id="province" onchange="loadDistricts()">
        <option disabled {% if not request.GET.province %}selected{% endif %}>Choose Province</option>
        {% for province in provinces %}
            <option value="{{ province.pk }}"
                {% if request.GET.province == province.pk %}selected{% endif %}>
                {{ province.province_name }}
            </option>
        {% endfor %}
    </select>

    <!-- District Dropdown -->
    <select name="district" id="district" onchange="loadMunicipalities()">
        <option disabled {% if not request.GET.district %}selected{% endif %}>Choose District</option>
        {% for district in districts %}
            {% if district.province.pk == request.GET.province %}
                <option value="{{ district.pk }}"
                    {% if request.GET.district == district.pk %}selected{% endif %}>
                    {{ district.district_name }}
                </option>
            {% endif %}
        {% endfor %}
    </select>


    <!-- Municipality Dropdown -->
    <select name="municipality" id="municipality">
        <option disabled {% if not request.GET.municipality %}selected{% endif %}>Choose Municipality</option>
        {% for muni in municipalities %}
            {% if muni.district.pk == request.GET.district %}
                <option value="{{ muni.pk }}"
                    {% if request.GET.municipality == muni.pk %}selected{% endif %}>
                    {{ muni.name }}
                </option>
            {% endif %}
        {% endfor %}
    </select>

    <button type="submit">Search</button>
    
</form>
 {% block content %}
  <!-- Landing page -->
  {% endblock %}
  {% block extra_script %}
  {% endblock %}
  <script src="static\js\search.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
