{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="page-wrapper">
    <div class="content-wrapper">
        <!-- Map Section -->
        <div class="mapbox">
            <div id="map"></div>
        </div>
<hr class="section-divider">

        <!-- Layout Section -->
        <div class="metrobox">
            <div class="big">
                <h3>Local Election 2079</h3>
                <div class="summary-wrapper flex justify-between px-4">
                    <!-- Mayor / Chairperson -->
                    <div class="summary-card bg-white shadow rounded-lg p-4 w-full md:w-1/2">
                        <h3 class="text-lg font-semibold mb-4">Mayor / Chairperson</h3>
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left border-b">
                                    <th class="py-2">Party</th>
                                    <th class="py-2">Win</th>
                                    <th class="py-2">Lead</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Filled dynamically by JS -->
                            </tbody>
                        </table>
                    </div>
        
                    <!-- Deputy Mayor / Vice-Chairperson -->
                    <div class="summary-card bg-white shadow rounded-lg p-4 w-full md:w-1/2">
                        <h3 class="text-lg font-semibold mb-4">Deputy Mayor / Vice-Chairperson</h3>
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left border-b">
                                    <th class="py-2">Party</th>
                                    <th class="py-2">Win</th>
                                    <th class="py-2">Lead</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Filled dynamically by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

<hr class="section-divider">

        <div class="metrobox">
            <!-- Metropolitan -->
            <div class="big">
                <h3>Metropolitan</h3>
                <div class="small">
                    <a href="">
                        <p>Mayor</p>
                    </a>
                    <a href="">
                        <p>Deputy Mayor</p>
                    </a>
        
                </div>
            </div>
        
            <div class="flexbox">
                {% for unit, candidates in top2_metro_mayor.items %}
                <div class="election-card">
                    <div class="municipality-name">{{ unit }}</div>
        
                    {% for candidate in candidates %}
                    <div class="candidate {% if forloop.first %}leading{% endif %}">
                        <img src="{{ candidate.photo }}" alt="{{ candidate.name }}" class="candidate-img">
                        <div class="candidate-info">
                            <strong>{{ candidate.name }}</strong>
                            <p>{{ candidate.party}}</p>
                            <div class="progress-bar">
                                <div class="progress {% if forloop.first %}blue{% else %}green{% endif %}" style="width: 10%;">
                                </div>
                            </div>
                        </div>
                        <div class="votes-party">
                            <div class="votes">{{ candidate.vote }}</div>
                            <img src="{{ candidate.party__logo }}" alt="{{ candidate.party }}" class="party-logo">
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        
            <!-- Submetropolitan -->
            <div class="big">
                <h3>Submetropolitan</h3>
                <div class="small">
                    <a href="">
                        <p>Mayor</p>
                    </a>
                    <a href="">
                        <p>Deputy Mayor</p>
                    </a>
        
                </div>
            </div>
            <div class="flexbox">
                {% for unit, candidates in top2_submetro_mayor.items %}
                <div class="election-card">
                    <div class="municipality-name">{{ unit }}</div>
        
                    {% for candidate in candidates %}
                    <div class="candidate {% if forloop.first %}leading{% endif %}">
                        <img src="{{ candidate.photo }}" alt="{{ candidate.name }}" class="candidate-img">
                        <div class="candidate-info">
                            <strong>{{ candidate.name }}</strong>
                            <p>{{ candidate.party}}</p>
                            <div class="progress-bar">
                                <div class="progress {% if forloop.first %}blue{% else %}green{% endif %}" style="width: 10%;">
                                </div>
                            </div>
                        </div>
                        <div class="votes-party">
                            <div class="votes">{{ candidate.vote }}</div>
                            <img src="{{ candidate.party__logo }}" alt="{{ candidate.party }}" class="party-logo">
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
        
<hr class="section-divider">

    <div class="chartbox">
  <div class="big">
    <h3>Province Results</h3>
  </div>

  <div class="province-container" id="province-container">
    <!-- Cards will be injected dynamically by JS -->
  </div>
</div>


    </div>
</div>


<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!--  custom JS -->
<script src="{% static 'js/home.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>

<!-- bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js"
    integrity="sha384-VQqxDN0EQCkWoxt/0vsQvZswzTHUVOImccYmSyhJTp7kGtPed0Qcx8rK9h9YEgx+"
    crossorigin="anonymous"></script>

<!-- Chart.js JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% endblock %}












